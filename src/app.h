#ifndef _B2D_BENCH_APP_H
#define _B2D_BENCH_APP_H

#include <b2d/b2d.h>
#include "./module_base.h"

namespace bench {

// ============================================================================
// [bench::BenchApp]
// ============================================================================

struct BenchApp {
  // --------------------------------------------------------------------------
  // [Construction / Destruction]
  // --------------------------------------------------------------------------

  BenchApp(int argc, char** argv);
  ~BenchApp();

  // --------------------------------------------------------------------------
  // [Args]
  // --------------------------------------------------------------------------

  bool hasArg(const char* key) const;
  const char* valueOf(const char* key) const;

  // --------------------------------------------------------------------------
  // [Init / Info]
  // --------------------------------------------------------------------------

  bool init();
  void info();

  // --------------------------------------------------------------------------
  // [Helpers]
  // --------------------------------------------------------------------------

  bool isStyleEnabled(uint32_t style);

  // --------------------------------------------------------------------------
  // [Run]
  // --------------------------------------------------------------------------

  int run();
  int runModule(BenchModule& module, BenchParams& params);

  // --------------------------------------------------------------------------
  // [Members]
  // --------------------------------------------------------------------------

  // Command line
  int _argc;
  char** _argv;

  // Configuration.
  bool _deepBench;
  bool _saveImages;
  bool _b2dTune;
  uint32_t _compOp;

  // Assets.
  b2d::Image _sprites[4];
};

} // namespace bench

#endif // _B2D_BENCH_APP_H
